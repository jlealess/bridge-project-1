(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(32)},25:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),s=(a(25),a(3)),c=(a(30),a(5)),u=a(6),i=a(8),m=a(7),g=a(9),f=function(e){var t=e.value,a=e.handleChange,n=e.label,l=e.id,o=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:l,className:"form__label"},n),r.a.createElement("input",{type:"text",value:t,onChange:a,name:o,id:l,className:"form__input"}))},p=function(e){var t=e.handleClick,a=e.className,n=e.value;return r.a.createElement("button",{onClick:t,className:a},n)},E="app/FETCH_FOLLOWERS",v="app/SET_LOGIN_ERROR",d="app/SET_USERNAME",h="app/SET_EVENTS",_="app/TOGGLE_FORK_EVENTS",y="app/TOGGLE_PULL_REQUEST_EVENTS",b="app/USER_LOGIN",N="app/USER_LOGOUT",O="?access_token=".concat("cf4c65ea084d892abe97b61e33a6bf2a2be32033"),w=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,a=e.loginErrorMessage,n=e.handleChangeUsername,l=e.loginUser;return r.a.createElement("div",{className:"login"},r.a.createElement("img",{src:"./assets/cat-avatar.jpg",alt:"GitHub Developer",className:"logo img img--rounded"}),r.a.createElement("h2",{className:"heading heading--light heading--centered"},"Welcome!",r.a.createElement("br",null)," Enter your GitHub username to login"),r.a.createElement("div",{className:"form form--login"},r.a.createElement(f,{name:"username",handleChange:n,id:"github-username",label:"Username",value:t,required:"true"}),r.a.createElement(p,{value:"Login",handleClick:function(){return l(t)},className:"full-width primary"}),r.a.createElement("p",{className:"error"},a)))}}]),t}(r.a.Component),F={handleChangeUsername:function(e){return{type:d,payload:e.target.value}},loginUser:function(e){return function(t){localStorage.getItem("ghDevUsername")||function(e){localStorage.setItem("ghDevUsername",e),localStorage.setItem("ghDevLoggedIn",!0)}(e),e?function(e){return fetch("https://api.github.com/users/".concat(e).concat(O))}(e).then(function(e){return e.json()}).then(function(e){return t(function(e){return{type:b,payload:e}}(e))}):t({type:v,payload:"Please enter a GitHub username"})}},setUserFromLocalStorage:function(e){return{type:d,payload:e}}},k=Object(s.b)(function(e){return{username:e.username,loginErrorMessage:e.loginErrorMessage}},F)(w),j=function(e){var t,a=e.event;return r.a.createElement("div",{className:"card card--event"},r.a.createElement("p",{className:"event__type"},"ForkEvent"===a.type?"Fork":"Pull Request"),a.status&&r.a.createElement("p",{className:"event__status event__status--".concat(a.status)},a.status),r.a.createElement("p",null,r.a.createElement("a",{href:a.repo.url,className:"event__link"},a.repo.name)),r.a.createElement("p",{className:"event__title"},a.title),"ForkEvent"===a.type&&r.a.createElement("p",null,"Forked to ",r.a.createElement("a",{href:a.payload.forkee.clone_url},a.payload.forkee.full_name)),r.a.createElement("p",{className:"event__date"},"Updated ",(t=a.updated_at?a.updated_at:a.created_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))))},R=function(e){var t=e.toggleForkEventsFilter,a=e.togglePullRequestEventsFilter,n=e.filters;return r.a.createElement("div",{className:"toggle-container"},r.a.createElement("p",{className:"toggle-container__label"},"Filter:"),r.a.createElement(p,{value:"Toggle Fork Events",handleClick:t,className:"filter-toggle ".concat(n.ForkEvent?"filter-toggle--active":"filter-toggle--inactive")}),r.a.createElement(p,{value:"Toggle Pull Request Events",handleClick:a,className:"filter-toggle ".concat(n.PullRequestEvent?"filter-toggle--active":"filter-toggle--inactive")}))},U=function(e){var t=e.events,a=e.filters,n=e.toggleForkEventsFilter,l=e.togglePullRequestEventsFilter;return r.a.createElement("div",{className:"events"},r.a.createElement("h2",null,"Recent activity"),r.a.createElement(R,{toggleForkEventsFilter:n,togglePullRequestEventsFilter:l,filters:a}),t.length?r.a.createElement("ul",{className:"events__list"},t.filter(function(e){return a[e.type]}).length?t.filter(function(e){return a[e.type]}).map(function(e,t){return r.a.createElement("li",{key:e.id,className:"events__list__item"},r.a.createElement(j,{event:e}))}):r.a.createElement("p",null,"Whoops, no events match your criteria!")):r.a.createElement("p",null,"Sorry, this user has no active repos."))},S=function(e){var t=e.followers;return r.a.createElement("div",{className:"followers"},r.a.createElement("h2",null,"My followers"),r.a.createElement("ul",{className:"followers__list"},t.length?t.map(function(e,t){return r.a.createElement("li",{key:e.id,className:"follower"},r.a.createElement("a",{href:e.html_url},r.a.createElement("img",{src:e.avatar_url,alt:"".concat(e.login,"'s avatar"),className:"follower__avatar"})))}):r.a.createElement("p",null,"No followers yet")))},L=function(e){var t=e.avatarUrl,a=e.username,n=e.handleLogout,l=e.followers;return r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"user__info"},r.a.createElement("img",{src:t||"./assets/user-avatar.png",alt:a||"",className:"profile__avatar"}),r.a.createElement("h2",{className:"heading heading--light heading--secondary mb-0"},"Hello, ",a),r.a.createElement(p,{handleClick:n,value:"Logout",className:"full-width"})),r.a.createElement(S,{followers:l}))},I=a(19),P=a(1),T=function(e){return{type:h,payload:e}},q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchEvents("https://api.github.com/users/".concat(this.props.username,"/events")),this.props.fetchFollowers(this.props.followersUrl)}},{key:"render",value:function(){var e=this.props,t=e.avatarUrl,a=e.username,n=e.followers,l=e.events,o=e.filters,s=e.handleLogout,c=e.toggleForkEventsFilter,u=e.togglePullRequestEventsFilter;return r.a.createElement("div",{className:"profile"},r.a.createElement(L,{avatarUrl:t,username:a,handleLogout:s,followers:n}),r.a.createElement(U,{events:l,filters:o,toggleForkEventsFilter:c,togglePullRequestEventsFilter:u}))}}]),t}(r.a.Component),C={fetchEvents:function(e){return function(t){return fetch(e).then(function(e){return e.json()}).then(function(e){return e.filter(function(e){return"ForkEvent"===e.type||"PullRequestEvent"===e.type})}).then(function(e){var a=e.map(function(e){return"PullRequestEvent"===e.type?fetch(e.payload.pull_request.url).then(function(e){return e.json()}).then(function(t){return Object(P.a)({},e,{status:t.state,title:t.title})}):e});Promise.all(Object(I.a)(a)).then(function(e){return t(T(e))})})}},fetchFollowers:function(e){return function(t){return fetch("".concat(e).concat(O)).then(function(e){return e.json()}).then(function(e){return t(function(e){return{type:E,payload:e}}(e))})}},handleLogout:function(){return localStorage.setItem("ghDevLoggedIn",!1),{type:N}},toggleForkEventsFilter:function(){return{type:_}},togglePullRequestEventsFilter:function(){return{type:y}}},D=Object(s.b)(function(e){return{avatarUrl:e.profile.avatar_url,events:e.events,filters:e.filters,followers:e.followers,followersUrl:e.profile.followers_url,username:e.username}},C)(q),G=function(){return r.a.createElement("div",{className:"App-header"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("img",{src:"./assets/cat-avatar.jpg",alt:"",className:"App-header__logo"}),r.a.createElement("h1",{className:"heading heading--main"},"Github Developer")))},M=Object(s.b)(function(e){return{loggedIn:e.loggedIn}})(function(e){var t=e.loggedIn;return r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement("div",{className:"App-body wrapper"},t?r.a.createElement(D,null):r.a.createElement(k,null)))}),A=a(4),H=a(18),V={username:"",profile:{},followers:[],events:[],loggedIn:!1,loginErrorMessage:"",filters:{ForkEvent:!0,PullRequestEvent:!0}},W=Object(A.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(P.a)({},e,{followers:t.payload});case h:return Object(P.a)({},e,{events:t.payload});case v:return Object(P.a)({},e,{loginErrorMessage:t.payload});case d:return Object(P.a)({},e,{loginErrorMessage:"",username:t.payload});case _:return Object(P.a)({},e,{filters:Object(P.a)({},e.filters,{ForkEvent:!e.filters.ForkEvent})});case y:return Object(P.a)({},e,{filters:Object(P.a)({},e.filters,{PullRequestEvent:!e.filters.PullRequestEvent})});case b:return Object(P.a)({},e,{loggedIn:!0,loginErrorMessage:"",profile:t.payload});case N:return Object(P.a)({},e,{profile:{},loggedIn:!1});default:return e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(A.a)(H.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=document.getElementById("root");o.a.render(r.a.createElement(s.a,{store:W},r.a.createElement(M,null)),X),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.c3ea8c2b.chunk.js.map